!function(p){"use strict";var e,o;function a(){o=new maplibregl.Map({container:"map",style:{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{"raster-tiles":{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[0,0],zoom:2}),t(),function(){var e={...n(),...l(),...i(),...r()};for(var o in e)p(document).on("change",`.acf-field[data-name="${o}"] :input`,(function(){t()}));p(document).on("click",".acf-field-message .button",(function(){t()}))}(),o.on("load",(()=>{o.resize()}))}function t(){e&&e.remove();var a=l(),t=i(),d=`\n\t\t\t.mapboxgl-popup .mapboxgl-popup-content, .maplibregl-popup .maplibregl-popup-content {\n        padding: 0px;\n        background: none;\n        border: none;\n        border-radius: none;\n        box-shadow: none;\n      }\n      #mapster-popup.map-popup-background {\n        background : ${a.background};\n        text-align : ${a.align};\n        border-radius: 3px;\n        box-shadow: 0 1px 2px rgb(0 0 0 / 10%);\n      }\n      #mapster-popup .map-popup-header {\n        background : ${a.header};\n        padding: 10px;\n      }\n      #mapster-popup .map-popup-header h2 {\n        all : revert;\n        color : ${a.header_text};\n        font-weight: bold;\n        margin: 0;\n        padding: 0;\n      }\n      #mapster-popup .map-popup-image {\n        background-image : url(https://via.placeholder.com/150x50);\n        background-position : center center;\n        background-size: cover;\n        height : ${a.image_height}px;\n        width: 100%;\n      }\n      #mapster-popup .map-popup-body {\n        margin-top: -1px;\n        background : ${a.body};\n        padding: 10px;\n        color : ${a.body_text};\n      }\n      #mapster-popup .map-popup-body p {\n        padding: 0px;\n        margin: 0px;\n      }\n      #mapster-popup .map-popup-footer {\n        margin-top: -1px;\n        background : ${a.footer};\n        padding: 10px;\n      }\n      #mapster-popup .map-popup-footer .map-popup-footer-button {\n        all : revert;\n        background : ${a.button};\n        border-color: ${a.button};\n        color : ${a.button_text};\n        padding: 5px;\n        text-decoration: none;\n        text-shadow: none;\n      }\n      #mapster-popup .map-popup-footer .map-popup-footer-button:hover {\n        cursor: pointer;\n        filter: brightness(1.15);\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-right .maplibregl-popup-tip {\n        border-bottom-color : ${a.pointer};\n        display : ${t.enable_pointer?"block":"none"};\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-right .maplibregl-popup-tip {\n\t\t\t\tborder-left-color : ${a.pointer};\n        display : ${t.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-left .maplibregl-popup-tip {\n\t\t\t\tborder-right-color : ${a.pointer};\n        display : ${t.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip {\n        border-top-color : ${a.pointer};\n        display : ${t.enable_pointer?"block":"none"};\n      }\n    `;console.log(d),function(e){""===p('.acf-field[data-name="css_editor"] :input').val()&&p('.acf-field[data-name="css_editor"] :input').val(e)}(d);var u=n(),c=r();e=new maplibregl.Popup({closeButton:u.close_button,maxWidth:u.max_width,closeOnClick:u.close_on_click,closeOnMove:u.close_on_map_move,focusAfterOpen:!1}).setLngLat(o.getCenter()).setHTML(`\n        <style>${d}</style>\n        ${t.use_custom_css?`<style>${a.css_editor}</style>`:""}\n        <div id="mapster-popup" class="map-popup-background ${t.popup_class}">\n          ${t.enable_header?`<div class="map-popup-header">\n              <h2>${c.header_text_preview}</h2>\n            </div>`:""}\n          ${t.enable_image?'<div class="map-popup-image"></div>':""}\n          ${t.enable_body?`<div class="map-popup-body">\n              <p>${c.content_preview}\n            </div>`:""}\n          ${t.enable_footer?`<div class="map-popup-footer">\n              <button class="map-popup-footer-button">${c.button_text_preview}</button>\n            </div>`:""}\n        </div>\n      `).addTo(o)}function n(){return{close_button:p('.acf-field[data-name="close_button"] :input').is(":checked"),close_on_click:p('.acf-field[data-name="close_on_click"] :input').is(":checked"),close_on_map_move:p('.acf-field[data-name="close_on_map_move"] :input').is(":checked"),max_width:p('.acf-field[data-name="max_width"] :input').val()+"px"}}function i(){return{enable_header:p('.acf-field[data-name="enable_header"] :input').is(":checked"),enable_image:p('.acf-field[data-name="enable_image"] :input').is(":checked"),enable_body:p('.acf-field[data-name="enable_body"] :input').is(":checked"),enable_footer:p('.acf-field[data-name="enable_footer"] :input').is(":checked"),enable_pointer:p('.acf-field[data-name="enable_pointer"] :input').is(":checked"),popup_class:p('.acf-field[data-name="popup_class"] :input').val(),use_custom_css:p('.acf-field[data-name="use_custom_css"] :input').is(":checked")}}function l(){return{background:p('.acf-field[data-name="background"] :input').val(),header:p('.acf-field[data-name="header"] :input').val(),image_height:p('.acf-field[data-name="image_height"] :input').val(),body:p('.acf-field[data-name="body"] :input').val(),footer:p('.acf-field[data-name="footer"] :input').val(),button:p('.acf-field[data-name="button"] :input').val(),pointer:p('.acf-field[data-name="pointer"] :input').val(),header_text:p('.acf-field[data-name="header_text"] :input').val(),body_text:p('.acf-field[data-name="body_text"] :input').val(),button_text:p('.acf-field[data-name="button_text"] :input').val(),align:p('.acf-field[data-name="align"] :input').val(),css_editor:p('.acf-field[data-name="css_editor"] :input').val()}}function r(){return{header_text_preview:p('.acf-field[data-name="header_text_preview"] :input').val(),content_preview:p('.acf-field[data-name="content_preview"] :input').val(),button_text_preview:p('.acf-field[data-name="button_text_preview"] :input').val()}}const d=window.acf;void 0!==d.add_action?(d.add_action("ready_field/name=background",a),d.add_action("append_field/name=background",a),d.add_action("show_field/name=background",a)):p(document).on("ready_field/name=background",(function(p,e){a()}))}(jQuery);